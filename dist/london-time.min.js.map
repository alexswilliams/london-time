{
  "version": 3,
  "sources": ["../src/london-time.ts"],
  "sourcesContent": ["'use strict'\n\nimport { sakamotoDayOfWeek } from './day-of-week'\nimport { daysInMonth } from './leap-years'\nimport { utcInstantToParts } from './parse'\n\nexport function utcTimestampToLondonDate(utcInstant: string): string {\n  if (typeof utcInstant !== 'string') throw TypeError('UTC Timestamp must be a string')\n  const parts = utcInstantToParts(utcInstant)\n\n  const utcToday = `${parts.year}-${zeroPad(parts.month)}-${zeroPad(parts.day)}`\n\n  const isDst = isUtcInstantInLondonDST(parts.year, parts.month, parts.day, parts.hour)\n  if (!isDst) return utcToday\n  if (isDst && parts.hour < 23) return utcToday\n  return datePlusOneDay(parts.year, parts.month, parts.day)\n}\n\nfunction zeroPad(part: number): string {\n  return part <= 9 ? `0${part}` : String(part)\n}\n\nfunction isUtcInstantInLondonDST(utcYear: number, utcMonth: number, utcDay: number, utcHour: number): boolean {\n  // in a month with no discontinuity\n  if (utcMonth < 3 || utcMonth > 10) return false\n  if (utcMonth > 3 || utcDay < 10) return true\n\n  const dayOfWeek = sakamotoDayOfWeek(utcYear, utcMonth, utcDay)\n  // have not yet reached last week of month\n  if (utcMonth === 3 && utcDay - dayOfWeek < 25) return false\n  if (utcMonth === 10 && utcDay - dayOfWeek < 25) return true\n\n  // have passed last sunday of month\n  if (utcMonth === 3 && dayOfWeek > 0) return true\n  if (utcMonth === 10 && dayOfWeek > 0) return false\n\n  if (utcMonth === 3 && utcHour < 1) return false // last sunday in march and before DST activates\n  if (utcMonth === 10 && utcHour >= 1) return false // last sunday in october and after DST deactivates\n\n  return true // last sunday of month and DST is active\n}\n\nfunction datePlusOneDay(year: number, month: number, day: number): string {\n  const newDay = (day % daysInMonth(year, month)) + 1\n  if (newDay !== 1) return `${year}-${zeroPad(month)}-${zeroPad(newDay)}`\n  const newMonth = (month % 12) + 1\n  if (newMonth !== 1) return `${year}-${zeroPad(newMonth)}-01`\n  const newYear = year + 1\n  return `${newYear}-01-01`\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,8BAAAE,IAAA,eAAAC,EAAAH,GAEA,IAAAI,EAAkC,yBAClCC,EAA4B,wBAC5BC,EAAkC,mBAE3B,SAASJ,EAAyBK,EAA4B,CACnE,GAAI,OAAOA,GAAe,SAAU,MAAM,UAAU,gCAAgC,EACpF,MAAMC,KAAQ,qBAAkBD,CAAU,EAEpCE,EAAW,GAAGD,EAAM,IAAI,IAAIE,EAAQF,EAAM,KAAK,CAAC,IAAIE,EAAQF,EAAM,GAAG,CAAC,GAEtEG,EAAQC,EAAwBJ,EAAM,KAAMA,EAAM,MAAOA,EAAM,IAAKA,EAAM,IAAI,EAEpF,MADI,CAACG,GACDA,GAASH,EAAM,KAAO,GAAWC,EAC9BI,EAAeL,EAAM,KAAMA,EAAM,MAAOA,EAAM,GAAG,CAC1D,CAEA,SAASE,EAAQI,EAAsB,CACrC,OAAOA,GAAQ,EAAI,IAAIA,CAAI,GAAK,OAAOA,CAAI,CAC7C,CAEA,SAASF,EAAwBG,EAAiBC,EAAkBC,EAAgBC,EAA0B,CAE5G,GAAIF,EAAW,GAAKA,EAAW,GAAI,MAAO,GAC1C,GAAIA,EAAW,GAAKC,EAAS,GAAI,MAAO,GAExC,MAAME,KAAY,qBAAkBJ,EAASC,EAAUC,CAAM,EAE7D,OAAID,IAAa,GAAKC,EAASE,EAAY,GAAW,GAClDH,IAAa,IAAMC,EAASE,EAAY,IAGxCH,IAAa,GAAKG,EAAY,EAAU,GACxC,EAAAH,IAAa,IAAMG,EAAY,GAE/BH,IAAa,GAAKE,EAAU,GAC5BF,IAAa,IAAME,GAAW,EAGpC,CAEA,SAASL,EAAeO,EAAcC,EAAeC,EAAqB,CACxE,MAAMC,EAAUD,KAAM,eAAYF,EAAMC,CAAK,EAAK,EAClD,GAAIE,IAAW,EAAG,MAAO,GAAGH,CAAI,IAAIV,EAAQW,CAAK,CAAC,IAAIX,EAAQa,CAAM,CAAC,GACrE,MAAMC,EAAYH,EAAQ,GAAM,EAChC,OAAIG,IAAa,EAAU,GAAGJ,CAAI,IAAIV,EAAQc,CAAQ,CAAC,MAEhD,GADSJ,EAAO,CACN,QACnB",
  "names": ["london_time_exports", "__export", "utcTimestampToLondonDate", "__toCommonJS", "import_day_of_week", "import_leap_years", "import_parse", "utcInstant", "parts", "utcToday", "zeroPad", "isDst", "isUtcInstantInLondonDST", "datePlusOneDay", "part", "utcYear", "utcMonth", "utcDay", "utcHour", "dayOfWeek", "year", "month", "day", "newDay", "newMonth"]
}
